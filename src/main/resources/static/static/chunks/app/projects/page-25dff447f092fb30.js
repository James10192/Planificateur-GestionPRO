(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[895],{6574:function(e,r,t){Promise.resolve().then(t.bind(t,7670))},7670:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return ProjectsPage}});var s=t(7437),n=t(2265),i=t(4033),a=t(5255);function MagnifyingGlassIcon({title:e,titleId:r,...t},s){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":r},t),e?n.createElement("title",{id:r},e):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}let l=n.forwardRef(MagnifyingGlassIcon);var c=t(9828),o=t(6806),d=t(9310),u=t(5838);function ChevronRightIcon({title:e,titleId:r,...t},s){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":r},t),e?n.createElement("title",{id:r},e):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}let x=n.forwardRef(ChevronRightIcon);var h=t(3510),j=t(3192),m=t(1018),f=t(345),p=t(6454);function ProjectList(e){let{searchTerm:r=""}=e,[t,a]=(0,n.useState)([]),[l,c]=(0,n.useState)(!0),[d,g]=(0,n.useState)(null),v=(0,i.useRouter)();(0,n.useEffect)(()=>{!async function(){try{c(!0);let e=await p.Hv.projects.getAll();a(e.data),g(null)}catch(e){console.error("Failed to fetch projects:",e),g("Impossible de charger les projets. Veuillez r\xe9essayer plus tard.")}finally{c(!1)}}()},[]);let y=t.filter(e=>e.name.toLowerCase().includes(r.toLowerCase())),getStatusVariant=e=>{switch(null==e?void 0:e.toLowerCase()){case"en cours":return"inProgress";case"termin\xe9":return"completed";case"annul\xe9":return"cancelled";case"non d\xe9marr\xe9":return"pending";default:return"default"}},getPriorityVariant=e=>{switch(null==e?void 0:e.toLowerCase()){case"haute":return"highPriority";case"moyenne":return"mediumPriority";case"basse":return"lowPriority";default:return"default"}};return l?(0,s.jsx)(m.Zb,{className:"p-6",children:(0,s.jsx)("div",{className:"flex items-center justify-center py-10",children:(0,s.jsx)("div",{className:"h-10 w-10 animate-spin rounded-full border-4 border-primary border-t-transparent"})})}):d?(0,s.jsx)(m.Zb,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-10 text-center",children:[(0,s.jsx)(u.Z,{className:"h-12 w-12 text-error mb-2"}),(0,s.jsx)("p",{className:"text-error font-medium mb-4",children:d}),(0,s.jsx)(o.z,{onClick:()=>window.location.reload(),children:"R\xe9essayer"})]})}):0===y.length?(0,s.jsx)(m.Zb,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-10 text-center",children:[(0,s.jsx)("p",{className:"text-muted-foreground mb-4",children:r?"Aucun projet ne correspond \xe0 votre recherche.":"Aucun projet n'a \xe9t\xe9 trouv\xe9."}),(0,s.jsx)(o.z,{onClick:()=>v.push("/projects/create"),children:"Cr\xe9er un projet"})]})}):(0,s.jsx)(m.Zb,{children:(0,s.jsxs)(h.iA,{children:[(0,s.jsx)(h.xD,{children:(0,s.jsxs)(h.SC,{children:[(0,s.jsx)(h.ss,{children:"Nom"}),(0,s.jsx)(h.ss,{children:"Type"}),(0,s.jsx)(h.ss,{children:"Statut"}),(0,s.jsx)(h.ss,{children:"Priorit\xe9"}),(0,s.jsx)(h.ss,{children:"Direction"}),(0,s.jsx)(h.ss,{children:"Date d\xe9but"}),(0,s.jsx)(h.ss,{children:"Date fin"}),(0,s.jsx)(h.ss,{className:"text-right",children:"Actions"})]})}),(0,s.jsx)(h.RM,{children:y.map(e=>{var r,t;return(0,s.jsxs)(h.SC,{className:"cursor-pointer",onClick:()=>v.push("/projects/".concat(e.id)),children:[(0,s.jsx)(h.pj,{className:"font-medium",children:e.name}),(0,s.jsx)(h.pj,{children:(null===(r=e.type)||void 0===r?void 0:r.name)||"-"}),(0,s.jsx)(h.pj,{children:e.status&&(0,s.jsx)(j.C,{variant:getStatusVariant(e.status.name),children:e.status.name})}),(0,s.jsx)(h.pj,{children:e.priority&&(0,s.jsx)(j.C,{variant:getPriorityVariant(e.priority.name),children:e.priority.name})}),(0,s.jsx)(h.pj,{children:(null===(t=e.direction)||void 0===t?void 0:t.name)||"-"}),(0,s.jsx)(h.pj,{children:(0,f.p6)(e.startDate,"dd/MM/yyyy")}),(0,s.jsx)(h.pj,{children:(0,f.p6)(e.endDate,"dd/MM/yyyy")}),(0,s.jsx)(h.pj,{className:"text-right",children:(0,s.jsx)(o.z,{variant:"ghost",size:"sm",onClick:r=>{r.stopPropagation(),v.push("/projects/".concat(e.id))},children:(0,s.jsx)(x,{className:"h-4 w-4"})})})]},e.id)})})]})})}function ProjectsPage(){let[e,r]=(0,n.useState)(""),t=(0,i.useRouter)();return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"Projets"}),(0,s.jsxs)(o.z,{onClick:()=>t.push("/projects/create"),className:"flex items-center gap-1",children:[(0,s.jsx)(a.Z,{className:"h-4 w-4"}),"Nouveau Projet"]})]}),(0,s.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 items-center justify-between",children:[(0,s.jsx)("div",{className:"w-full md:w-1/2",children:(0,s.jsx)(d.I,{type:"text",placeholder:"Rechercher un projet...",value:e,onChange:e=>r(e.target.value),icon:(0,s.jsx)(l,{className:"h-5 w-5"})})}),(0,s.jsx)("div",{className:"flex gap-2 w-full md:w-auto",children:(0,s.jsxs)(o.z,{variant:"outline",className:"flex items-center gap-1",children:[(0,s.jsx)(c.Z,{className:"h-4 w-4"}),"Filtres"]})})]}),(0,s.jsx)(ProjectList,{searchTerm:e})]})}},9310:function(e,r,t){"use strict";t.d(r,{I:function(){return a}});var s=t(7437),n=t(2265),i=t(345);let a=n.forwardRef((e,r)=>{let{className:t,type:n,error:a,icon:l,...c}=e;return(0,s.jsxs)("div",{className:"relative",children:[l&&(0,s.jsx)("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",children:l}),(0,s.jsx)("input",{type:n,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a&&"border-error focus-visible:ring-error",l&&"pl-10",t),ref:r,...c})]})});a.displayName="Input"}},function(e){e.O(0,[163,534,971,472,744],function(){return e(e.s=6574)}),_N_E=e.O()}]);