"use strict";exports.id=430,exports.ids=[430],exports.modules={8463:(e,t,a)=>{a.d(t,{Z:()=>ProjectForm});var r=a(784),s=a(9885),i=a(7114),n=a(706),d=a(9872),l=a(467);let o=s.forwardRef(({className:e,options:t,error:a,label:s,...i},n)=>(0,r.jsxs)("div",{className:"space-y-1",children:[s&&r.jsx("label",{htmlFor:i.id,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:s}),(0,r.jsxs)("select",{className:(0,l.cn)("w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a&&"border-error focus-visible:ring-error",e),ref:n,...i,children:[r.jsx("option",{value:"",children:"S\xe9lectionner..."}),t.map(e=>r.jsx("option",{value:e.value,children:e.label},e.value))]})]}));o.displayName="Select";var c=a(5035);function ProjectForm({project:e,onSubmit:t,onError:a}){let m=(0,i.useRouter)(),[u,p]=(0,s.useState)(!1),[x,h]=(0,s.useState)(e||{name:"",description:"",typeId:0,statusId:0,priorityId:0,directionId:0,teamId:0,startDate:new Date().toISOString().split("T")[0],endDate:""}),[I,j]=(0,s.useState)([]),[b,g]=(0,s.useState)([]),[v,y]=(0,s.useState)([]),[f,N]=(0,s.useState)([]),[D,C]=(0,s.useState)([]),[S,w]=(0,s.useState)({});(0,s.useEffect)(()=>{(async function(){try{let[e,t,a,r,s]=await Promise.all([c.Hv.parameters.getProjectTypes(),c.Hv.parameters.getStatuses(),c.Hv.parameters.getPriorities(),c.Hv.parameters.getDirections(),c.Hv.teams.getAll()]);j(e.data),g(t.data),y(a.data),N(r.data),C(s.data)}catch(e){console.error("Error loading reference data:",e),a("Erreur lors du chargement des donn\xe9es de r\xe9f\xe9rence. Veuillez rafra\xeechir la page.")}})()},[a]);let handleInputChange=e=>{let{name:t,value:a}=e.target;h(e=>({...e,[t]:a})),S[t]&&w(e=>{let a={...e};return delete a[t],a})},validateForm=()=>{let e={};return x.name?.trim()||(e.name="Le nom du projet est requis"),x.typeId||(e.typeId="Le type de projet est requis"),x.statusId||(e.statusId="Le statut est requis"),x.priorityId||(e.priorityId="La priorit\xe9 est requise"),x.directionId||(e.directionId="La direction est requise"),x.startDate||(e.startDate="La date de d\xe9but est requise"),w(e),0===Object.keys(e).length},handleSubmit=async e=>{if(e.preventDefault(),validateForm()){p(!0);try{let e={...x,typeId:Number(x.typeId),statusId:Number(x.statusId),priorityId:Number(x.priorityId),directionId:Number(x.directionId),teamId:x.teamId&&Number(x.teamId)>0?Number(x.teamId):void 0};t(e)}catch(e){console.error("Error saving project:",e),a((0,l.e$)(e))}finally{p(!1)}}};return(0,r.jsxs)("form",{onSubmit:handleSubmit,className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("label",{htmlFor:"name",className:"text-sm font-medium",children:["Nom du projet ",r.jsx("span",{className:"text-error",children:"*"})]}),r.jsx(n.I,{id:"name",name:"name",value:x.name,onChange:handleInputChange,error:!!S.name}),S.name&&r.jsx("p",{className:"text-sm text-error",children:S.name})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("label",{htmlFor:"typeId",className:"text-sm font-medium",children:["Type de projet ",r.jsx("span",{className:"text-error",children:"*"})]}),r.jsx(o,{id:"typeId",name:"typeId",value:x.typeId||"",onChange:handleInputChange,options:I.map(e=>({value:e.id,label:e.name})),error:!!S.typeId}),S.typeId&&r.jsx("p",{className:"text-sm text-error",children:S.typeId})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("label",{htmlFor:"statusId",className:"text-sm font-medium",children:["Statut ",r.jsx("span",{className:"text-error",children:"*"})]}),r.jsx(o,{id:"statusId",name:"statusId",value:x.statusId||"",onChange:handleInputChange,options:b.map(e=>({value:e.id,label:e.name})),error:!!S.statusId}),S.statusId&&r.jsx("p",{className:"text-sm text-error",children:S.statusId})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("label",{htmlFor:"priorityId",className:"text-sm font-medium",children:["Priorit\xe9 ",r.jsx("span",{className:"text-error",children:"*"})]}),r.jsx(o,{id:"priorityId",name:"priorityId",value:x.priorityId||"",onChange:handleInputChange,options:v.map(e=>({value:e.id,label:e.name})),error:!!S.priorityId}),S.priorityId&&r.jsx("p",{className:"text-sm text-error",children:S.priorityId})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("label",{htmlFor:"directionId",className:"text-sm font-medium",children:["Direction ",r.jsx("span",{className:"text-error",children:"*"})]}),r.jsx(o,{id:"directionId",name:"directionId",value:x.directionId||"",onChange:handleInputChange,options:f.map(e=>({value:e.id,label:`${e.code} - ${e.name}`})),error:!!S.directionId}),S.directionId&&r.jsx("p",{className:"text-sm text-error",children:S.directionId})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx("label",{htmlFor:"teamId",className:"text-sm font-medium",children:"\xc9quipe"}),r.jsx(o,{id:"teamId",name:"teamId",value:x.teamId||"",onChange:handleInputChange,options:D.map(e=>({value:e.id,label:e.name}))})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("label",{htmlFor:"startDate",className:"text-sm font-medium",children:["Date de d\xe9but ",r.jsx("span",{className:"text-error",children:"*"})]}),r.jsx(n.I,{id:"startDate",name:"startDate",type:"date",value:x.startDate?x.startDate.split("T")[0]:"",onChange:handleInputChange,error:!!S.startDate}),S.startDate&&r.jsx("p",{className:"text-sm text-error",children:S.startDate})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx("label",{htmlFor:"endDate",className:"text-sm font-medium",children:"Date de fin pr\xe9vue"}),r.jsx(n.I,{id:"endDate",name:"endDate",type:"date",value:x.endDate?x.endDate.split("T")[0]:"",onChange:handleInputChange})]})]}),(0,r.jsxs)("div",{className:"space-y-2 col-span-full",children:[r.jsx("label",{htmlFor:"description",className:"text-sm font-medium",children:"Description"}),r.jsx("textarea",{id:"description",name:"description",value:x.description||"",onChange:handleInputChange,rows:4,className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring"})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-3",children:[r.jsx(d.z,{type:"button",variant:"outline",onClick:()=>m.back(),children:"Annuler"}),r.jsx(d.z,{type:"submit",loading:u,children:e?.id?"Mettre \xe0 jour":"Cr\xe9er"})]})]})}},6320:(e,t,a)=>{a.d(t,{Z:()=>i});var r=a(9885);function ArrowLeftIcon({title:e,titleId:t,...a},s){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},a),e?r.createElement("title",{id:t},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"}))}let s=r.forwardRef(ArrowLeftIcon),i=s}};