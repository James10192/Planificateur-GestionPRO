(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[734],{1665:function(e,t,r){Promise.resolve().then(r.bind(r,5651))},5651:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return DeleteProjectPage}});var s=r(7437),n=r(2265),a=r(4033),c=r(3753),o=r(5838),i=r(887),l=r(6806),u=r(1018),d=r(6454),m=r(345);function DeleteProjectPage(){let[e,t]=(0,n.useState)(null),[r,p]=(0,n.useState)(!0),[f,g]=(0,n.useState)(!1),[x,h]=(0,n.useState)(null),{id:v}=(0,a.useParams)(),j=(0,a.useRouter)();(0,n.useEffect)(()=>{let fetchProject=async()=>{try{let e=await d.Hv.projects.getById(Number(v));t(e.data),h(null)}catch(e){console.error("Failed to fetch project:",e),h((0,m.e$)(e))}finally{p(!1)}};v&&fetchProject()},[v]);let handleConfirmDelete=async()=>{g(!0),h(null);try{await d.Hv.projects.delete(Number(v)),j.push("/projects")}catch(e){console.error("Failed to delete project:",e),h((0,m.e$)(e)),g(!1)}};return(0,s.jsxs)("div",{className:"max-w-2xl mx-auto space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)(l.z,{variant:"ghost",size:"sm",onClick:()=>j.push("/projects/".concat(v)),className:"flex items-center gap-1",disabled:f,children:[(0,s.jsx)(c.Z,{className:"h-4 w-4"}),"Retour"]}),(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"Supprimer le projet"})]}),x&&(0,s.jsxs)("div",{className:"bg-error/10 border border-error/30 rounded-md p-4 flex items-start gap-2 text-error",children:[(0,s.jsx)(o.Z,{className:"h-5 w-5 mt-0.5 flex-shrink-0"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium",children:r?"Erreur lors du chargement du projet":"Erreur lors de la suppression du projet"}),(0,s.jsx)("p",{className:"text-sm",children:x})]})]}),r?(0,s.jsx)(u.Zb,{className:"animate-pulse",children:(0,s.jsxs)(u.aY,{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,s.jsx)("div",{className:"h-8 w-8 bg-neutral-200 rounded-full"}),(0,s.jsx)("div",{className:"h-6 bg-neutral-200 rounded w-3/4"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("div",{className:"h-4 bg-neutral-200 rounded w-full"}),(0,s.jsx)("div",{className:"h-4 bg-neutral-200 rounded w-full"}),(0,s.jsx)("div",{className:"h-4 bg-neutral-200 rounded w-full"})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-2 mt-6",children:[(0,s.jsx)("div",{className:"h-10 bg-neutral-200 rounded w-24"}),(0,s.jsx)("div",{className:"h-10 bg-neutral-200 rounded w-24"})]})]})}):e?(0,s.jsx)(u.Zb,{children:(0,s.jsxs)(u.aY,{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex items-start gap-3 mb-4 text-error",children:[(0,s.jsx)(i.Z,{className:"h-8 w-8 flex-shrink-0"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-lg font-semibold",children:"\xcates-vous s\xfbr de vouloir supprimer ce projet ?"}),(0,s.jsxs)("p",{className:"text-neutral-500 mt-1",children:["Vous \xeates sur le point de supprimer le projet"," ",(0,s.jsx)("span",{className:"font-medium",children:e.name}),". Cette action est irr\xe9versible et supprimera toutes les donn\xe9es associ\xe9es au projet."]})]})]}),(0,s.jsxs)("div",{className:"border rounded-md p-4 mb-6 bg-neutral-50",children:[(0,s.jsx)("h3",{className:"font-medium mb-2",children:"Cette action va supprimer :"}),(0,s.jsxs)("ul",{className:"space-y-1 text-sm text-neutral-700",children:[(0,s.jsx)("li",{children:"• Toutes les informations du projet"}),(0,s.jsx)("li",{children:"• Les plannings associ\xe9s"}),(0,s.jsx)("li",{children:"• Les actions et t\xe2ches associ\xe9es"}),(0,s.jsx)("li",{children:"• Les documents associ\xe9s"}),(0,s.jsx)("li",{children:"• Les donn\xe9es budg\xe9taires"})]})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,s.jsx)(l.z,{variant:"outline",onClick:()=>j.push("/projects/".concat(v)),disabled:f,children:"Annuler"}),(0,s.jsx)(l.z,{variant:"destructive",onClick:handleConfirmDelete,disabled:f,className:"flex items-center gap-1",children:f?"Suppression...":"Confirmer la suppression"})]})]})}):x?null:(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("p",{className:"text-neutral-500",children:"Projet introuvable"}),(0,s.jsx)(l.z,{variant:"outline",size:"sm",onClick:()=>j.push("/projects"),className:"mt-4",children:"Retour \xe0 la liste des projets"})]})]})}},6806:function(e,t,r){"use strict";r.d(t,{z:function(){return i}});var s=r(7437),n=r(2265),a=r(6061),c=r(345);let o=(0,a.j)("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-white hover:bg-primary/90",destructive:"bg-error text-white hover:bg-error/90",outline:"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-white hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",success:"bg-success text-white hover:bg-success/90",warning:"bg-warning text-white hover:bg-warning/90"},size:{default:"h-10 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-12 rounded-md px-6",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),i=(0,n.forwardRef)((e,t)=>{let{className:r,variant:n,size:a,loading:i=!1,children:l,disabled:u,...d}=e;return(0,s.jsxs)("button",{className:(0,c.cn)(o({variant:n,size:a,className:r})),ref:t,disabled:u||i,...d,children:[i&&(0,s.jsxs)("svg",{className:"mr-2 h-4 w-4 animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),l]})});i.displayName="Button"},1018:function(e,t,r){"use strict";r.d(t,{Ol:function(){return o},Zb:function(){return c},aY:function(){return u},ll:function(){return i}});var s=r(7437),n=r(2265),a=r(345);let c=(0,n.forwardRef)((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...n})});c.displayName="Card";let o=(0,n.forwardRef)((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",r),...n})});o.displayName="CardHeader";let i=(0,n.forwardRef)((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("h3",{ref:t,className:(0,a.cn)("text-lg font-semibold leading-none tracking-tight",r),...n})});i.displayName="CardTitle";let l=(0,n.forwardRef)((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("p",{ref:t,className:(0,a.cn)("text-sm text-muted-foreground",r),...n})});l.displayName="CardDescription";let u=(0,n.forwardRef)((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("p-6 pt-0",r),...n})});u.displayName="CardContent";let d=(0,n.forwardRef)((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("flex items-center p-6 pt-0",r),...n})});d.displayName="CardFooter"},6454:function(e,t,r){"use strict";r.d(t,{Hv:function(){return i},dV:function(){return l}});var s=r(4829),n=r(2601);let a="true"===n.env.NEXT_PUBLIC_USE_MOCKS,c=n.env.NEXT_PUBLIC_API_BASE_URL||"/api/v1",o=s.Z.create({baseURL:c,headers:{"Content-Type":"application/json"}});o.interceptors.response.use(e=>e,e=>{var t;return console.error("API Error:",(null===(t=e.response)||void 0===t?void 0:t.data)||e.message),Promise.reject(e)});let i={projects:{getAll:()=>o.get("/projects"),getById:e=>o.get("/projects/".concat(e)),create:e=>o.post("/projects",e),update:(e,t)=>o.put("/projects/".concat(e),t),delete:e=>o.delete("/projects/".concat(e)),getActions:e=>o.get("/projects/".concat(e,"/actions"))},actions:{getAll:()=>o.get("/actions"),getById:e=>o.get("/actions/".concat(e)),create:e=>o.post("/actions",e),update:(e,t)=>o.put("/actions/".concat(e),t),delete:e=>o.delete("/actions/".concat(e)),getSubActions:e=>o.get("/actions/".concat(e,"/sub-actions"))},plannings:{getAll:()=>o.get("/plannings"),getById:e=>o.get("/plannings/".concat(e)),create:e=>o.post("/plannings",e),update:(e,t)=>o.put("/plannings/".concat(e),t),delete:e=>o.delete("/plannings/".concat(e))},parameters:{getProjectTypes:()=>o.get("/parameters/project-types"),getStatuses:()=>o.get("/parameters/statuses"),getPriorities:()=>o.get("/parameters/priorities"),getDirections:()=>o.get("/parameters/directions"),getPortfolioPhases:()=>o.get("/parameters/portfolio-phases"),getTeamRoles:()=>o.get("/parameters/team-roles")},users:{getAll:()=>o.get("/users"),getById:e=>o.get("/users/".concat(e)),create:e=>o.post("/users",e),update:(e,t)=>o.put("/users/".concat(e),t),delete:e=>o.delete("/users/".concat(e))},teams:{getAll:()=>o.get("/teams"),getById:e=>o.get("/teams/".concat(e)),create:e=>o.post("/teams",e),update:(e,t)=>o.put("/teams/".concat(e),t),delete:e=>o.delete("/teams/".concat(e)),getMembers:e=>o.get("/teams/".concat(e,"/members"))},dashboard:{getSummary:()=>o.get("/dashboard/summary"),getRecentActivities:()=>o.get("/dashboard/activities"),getTasksByUser:e=>o.get("/dashboard/tasks/user/".concat(e))},kpis:{getMetrics:()=>o.get("/kpis/metrics"),getMetricById:e=>o.get("/kpis/metrics/".concat(e)),createMetric:e=>o.post("/kpis/metrics",e),updateMetric:(e,t)=>o.put("/kpis/metrics/".concat(e),t),deleteMetric:e=>o.delete("/kpis/metrics/".concat(e)),getProjectKpis:e=>o.get("/kpis/projects/".concat(e)),getProjectKpiHistory:(e,t)=>o.get("/kpis/projects/".concat(e,"/metrics/").concat(t,"/history")),recordKpiValue:(e,t,r)=>o.post("/kpis/projects/".concat(e,"/metrics/").concat(t),r),calculateKpi:(e,t)=>o.post("/kpis/projects/".concat(e,"/metrics/").concat(t,"/calculate")),exportKpiData:(e,t)=>o.get("/kpis/projects/".concat(e,"/export?format=").concat(t),{responseType:"blob"})}},l={USE_MOCKS:a,API_BASE_URL:c};console.log("[API Config] Using mocks:",a)},345:function(e,t,r){"use strict";r.d(t,{Qm:function(){return getInitials},T3:function(){return formatPercent},cn:function(){return cn},e$:function(){return getErrorMessage},o0:function(){return formatDateTime},p6:function(){return formatDate},xG:function(){return formatCurrency}});var s=r(7042),n=r(3986),a=r(7124),c=r(4493),o=r(8694);function cn(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.m)((0,s.W)(t))}function formatDate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"PPP";if(!e)return"-";try{let r="string"==typeof e?(0,c.Z)(e):e;return(0,a.Z)(r,t,{locale:o.Z})}catch(t){return console.error("Date formatting error:",t),"string"==typeof e?e:e.toString()}}function formatDateTime(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"PPP \xe0 HH:mm";return formatDate(e,t)}function formatPercent(e){return null==e?"-":"".concat(Math.round(e),"%")}function formatCurrency(e){return null==e?"-":new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(e)}function getInitials(e,t){if(!e&&!t)return"?";let r=e?e.charAt(0).toUpperCase():"",s=t?t.charAt(0).toUpperCase():"";return"".concat(r).concat(s)}function getErrorMessage(e){let t="Une erreur s'est produite. Veuillez r\xe9essayer.";if(!e||!e.response)return t;let{status:r}=e.response;switch(r){case 400:return"Donn\xe9es invalides. Veuillez v\xe9rifier vos informations.";case 401:return"Non autoris\xe9. Veuillez vous connecter.";case 403:return"Vous n'avez pas les droits pour effectuer cette action.";case 404:return"Ressource non trouv\xe9e.";case 409:return"Conflit avec l'\xe9tat actuel de la ressource.";case 500:return"Erreur serveur. Veuillez r\xe9essayer ult\xe9rieurement.";default:return t}}},4033:function(e,t,r){e.exports=r(94)},3753:function(e,t,r){"use strict";var s=r(2265);function ArrowLeftIcon({title:e,titleId:t,...r},n){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?s.createElement("title",{id:t},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"}))}let n=s.forwardRef(ArrowLeftIcon);t.Z=n},5838:function(e,t,r){"use strict";var s=r(2265);function ExclamationCircleIcon({title:e,titleId:t,...r},n){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?s.createElement("title",{id:t},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"}))}let n=s.forwardRef(ExclamationCircleIcon);t.Z=n},887:function(e,t,r){"use strict";var s=r(2265);function ExclamationTriangleIcon({title:e,titleId:t,...r},n){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?s.createElement("title",{id:t},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))}let n=s.forwardRef(ExclamationTriangleIcon);t.Z=n},6061:function(e,t,r){"use strict";r.d(t,{j:function(){return cva}});var s=r(7042);let falsyToString=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,n=s.W,cva=(e,t)=>r=>{var s;if((null==t?void 0:t.variants)==null)return n(e,null==r?void 0:r.class,null==r?void 0:r.className);let{variants:a,defaultVariants:c}=t,o=Object.keys(a).map(e=>{let t=null==r?void 0:r[e],s=null==c?void 0:c[e];if(null===t)return null;let n=falsyToString(t)||falsyToString(s);return a[e][n]}),i=r&&Object.entries(r).reduce((e,t)=>{let[r,s]=t;return void 0===s||(e[r]=s),e},{}),l=null==t?void 0:null===(s=t.compoundVariants)||void 0===s?void 0:s.reduce((e,t)=>{let{class:r,className:s,...n}=t;return Object.entries(n).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...c,...i}[t]):({...c,...i})[t]===r})?[...e,r,s]:e},[]);return n(e,o,l,null==r?void 0:r.class,null==r?void 0:r.className)}}},function(e){e.O(0,[163,971,472,744],function(){return e(e.s=1665)}),_N_E=e.O()}]);